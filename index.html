<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Valentine ❤️</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #000;
            color: #fff;
            overflow: hidden;
            user-select: none;
            touch-action: manipulation;
        }
        
        /* Screen styles */
        .screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            transition: opacity 1s ease, transform 1s ease;
            z-index: 10;
        }
        
        .screen.hidden {
            opacity: 0;
            pointer-events: none;
            transform: translateY(20px);
        }
        
        /* Start screen */
        #start-screen {
            background: linear-gradient(135deg, #000000 0%, #1a001a 100%);
            z-index: 100;
            cursor: pointer;
            padding: 20px;
        }
        
        .touch-to-continue {
            position: absolute;
            bottom: 40px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 18px;
            color: #ff5e8e;
            animation: blink 2s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        /* Name screen */
        #name-screen {
            background: linear-gradient(135deg, #1a001a 0%, #330033 100%);
            cursor: pointer;
            padding: 20px;
        }
        
        .heart-icon {
            font-size: 60px;
            color: #ff5e8e;
            margin-bottom: 20px;
            animation: heartbeat 1.5s infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .recipient-name {
            font-family: 'Dancing Script', cursive;
            font-size: 64px;
            color: #ff5e8e;
            margin: 20px 0;
            text-shadow: 0 0 10px rgba(255, 94, 142, 0.5);
        }
        
        /* Memory screen */
        #memory-screen {
            background: linear-gradient(135deg, #330033 0%, #660066 100%);
            cursor: pointer;
            padding: 20px;
        }
        
        .memory-text {
            font-size: 48px;
            color: #ffb6c1;
            font-family: 'Dancing Script', cursive;
            margin-bottom: 30px;
        }
        
        /* Location screen */
        #location-screen {
            background-color: #000;
            display: block;
            padding: 0;
        }
        
        .location-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .location-header {
            padding: 15px 20px;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 20;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.7);
            position: relative;
            flex-shrink: 0;
        }
        
        .location-title {
            font-size: 24px;
            color: #ff5e8e;
            margin-bottom: 5px;
        }
        
        .location-instructions {
            font-size: 14px;
            color: #ffb6c1;
            margin-bottom: 10px;
        }
        
        .streetview-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: #000;
        }
        
        #streetview-iframe {
            width: 100%;
            height: 100%;
            border: none;
            position: absolute;
            top: 0;
            left: 0;
        }
        
        /* Message overlay - now positioned over Google Maps */
        .message-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 30;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.85);
        }
        
        .message-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .message-content {
            max-width: 600px;
            width: 90%;
            background: linear-gradient(135deg, rgba(102, 0, 102, 0.95), rgba(51, 0, 51, 0.95));
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.8);
            border: 3px solid #ff5e8e;
            position: relative;
            animation: slideUp 0.4s ease;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .close-message-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(255, 94, 142, 0.2);
            border: none;
            color: #ffb6c1;
            font-size: 20px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 5;
        }
        
        .close-message-btn:hover {
            background-color: rgba(255, 94, 142, 0.4);
            color: #fff;
            transform: rotate(90deg);
        }
        
        .message-title {
            font-size: 22px;
            color: #ffb6c1;
            margin-bottom: 15px;
            font-family: 'Dancing Script', cursive;
            text-align: center;
        }
        
        .message-text {
            font-size: 17px;
            line-height: 1.6;
            color: #fff;
            margin-bottom: 25px;
            text-align: center;
            padding: 0 10px;
        }
        
        .message-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }
        
        .message-btn {
            padding: 12px 30px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            border: none;
            min-width: 140px;
        }
        
        .continue-message-btn {
            background: linear-gradient(to right, #ff5e8e, #ff3d7a);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 94, 142, 0.4);
        }
        
        .continue-message-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 94, 142, 0.6);
        }
        
        .close-message-btn-small {
            background: rgba(255, 255, 255, 0.1);
            color: #ffb6c1;
            border: 1px solid rgba(255, 94, 142, 0.3);
        }
        
        .close-message-btn-small:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            transform: translateY(-3px);
        }
        
        /* Heart markers - positioned over Google Maps */
        .heart-marker {
            position: absolute;
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, #ff5e8e, #ff3d7a);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 25px rgba(255, 94, 142, 0.9);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 25;
            animation: pulse 2s infinite;
            border: 3px solid white;
        }
        
        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 94, 142, 0.8), 0 0 40px rgba(255, 94, 142, 0.4); 
            }
            50% { 
                box-shadow: 0 0 30px rgba(255, 94, 142, 1), 0 0 60px rgba(255, 94, 142, 0.6); 
            }
        }
        
        .heart-marker:hover {
            transform: translate(-50%, -50%) scale(1.2);
            box-shadow: 0 0 35px rgba(255, 94, 142, 1);
        }
        
        .heart-marker.found {
            opacity: 0.4;
            transform: translate(-50%, -50%) scale(0.7);
            pointer-events: none;
            animation: none;
            background: #888;
            border-color: #aaa;
        }
        
        .heart-marker i {
            color: white;
            font-size: 26px;
        }
        
        /* Progress bar - positioned over Google Maps */
        .progress-overlay {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 25;
            padding: 0 20px;
        }
        
        .progress-container {
            background: rgba(0, 0, 0, 0.85);
            border-radius: 50px;
            padding: 12px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.7);
            border: 2px solid rgba(255, 94, 142, 0.5);
            backdrop-filter: blur(5px);
            max-width: 500px;
            width: 100%;
        }
        
        .progress-text {
            color: #ffb6c1;
            font-size: 15px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        .progress-dots {
            display: flex;
            gap: 10px;
            flex: 1;
            justify-content: center;
        }
        
        .progress-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: #444;
            transition: all 0.3s;
        }
        
        .progress-dot.active {
            background-color: #ff5e8e;
            transform: scale(1.2);
            box-shadow: 0 0 10px rgba(255, 94, 142, 0.7);
        }
        
        .progress-dot.found {
            background-color: #ffb6c1;
        }
        
        /* Next location button - appears when all messages found */
        .next-location-btn {
            position: absolute;
            bottom: 90px;
            right: 20px;
            background: linear-gradient(to right, #ff5e8e, #ff3d7a);
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            box-shadow: 0 5px 20px rgba(255, 94, 142, 0.6);
            z-index: 25;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }
        
        .next-location-btn.visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
            animation: slideInUp 0.5s ease;
        }
        
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .next-location-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 94, 142, 0.8);
        }
        
        /* Final screen */
        #final-screen {
            background: linear-gradient(135deg, #000033 0%, #330033 100%);
            overflow-y: auto;
            padding: 40px 20px;
            cursor: default;
        }
        
        .love-letter-container {
            max-width: 800px;
            background: rgba(0, 0, 0, 0.9);
            padding: 60px;
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
            border: 3px solid #ff5e8e;
            animation: fadeIn 1.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .love-letter-header {
            font-family: 'Dancing Script', cursive;
            font-size: 48px;
            color: #ff5e8e;
            margin-bottom: 40px;
            text-align: center;
        }
        
        .love-letter-content {
            font-size: 20px;
            line-height: 1.9;
            color: #fff;
            white-space: pre-line;
            text-align: left;
        }
        
        .final-heart {
            font-size: 80px;
            color: #ff5e8e;
            margin-top: 50px;
            animation: heartbeat 1.5s infinite;
            text-align: center;
        }
        
        /* Music player */
        .music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            background-color: rgba(0, 0, 0, 0.9);
            border-radius: 50px;
            padding: 12px 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(255, 94, 142, 0.6);
            backdrop-filter: blur(5px);
        }
        
        .music-btn {
            background: none;
            border: none;
            color: #ff5e8e;
            font-size: 24px;
            cursor: pointer;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .music-btn:hover {
            background-color: rgba(255, 94, 142, 0.2);
            transform: scale(1.1);
        }
        
        .music-info {
            font-size: 15px;
            color: #ffb6c1;
            font-weight: 500;
        }
        
        /* Location navigation (dots at the top) */
        .location-nav {
            position: absolute;
            top: 15px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 20;
        }
        
        .location-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
        }
        
        .location-dot.active {
            background-color: #ff5e8e;
            transform: scale(1.3);
        }
        
        .location-dot.visited {
            background-color: #ffb6c1;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .recipient-name {
                font-size: 48px;
            }
            
            .memory-text {
                font-size: 36px;
            }
            
            .location-title {
                font-size: 20px;
            }
            
            .location-instructions {
                font-size: 13px;
            }
            
            .love-letter-header {
                font-size: 36px;
            }
            
            .love-letter-content {
                font-size: 18px;
                line-height: 1.7;
            }
            
            .heart-marker {
                width: 50px;
                height: 50px;
            }
            
            .message-content {
                padding: 25px 20px;
            }
            
            .message-btn {
                padding: 10px 20px;
                min-width: 120px;
                font-size: 15px;
            }
            
            .message-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .next-location-btn {
                bottom: 100px;
                right: 50%;
                transform: translateX(50%) translateY(20px);
                font-size: 15px;
                padding: 12px 25px;
            }
            
            .next-location-btn.visible {
                transform: translateX(50%) translateY(0);
            }
            
            .progress-container {
                padding: 10px 20px;
            }
            
            .love-letter-container {
                padding: 40px 25px;
            }
            
            .music-player {
                bottom: 15px;
                right: 15px;
                padding: 10px 20px;
            }
        }
        
        @media (max-width: 480px) {
            .recipient-name {
                font-size: 36px;
            }
            
            .memory-text {
                font-size: 28px;
            }
            
            .love-letter-header {
                font-size: 32px;
            }
            
            .love-letter-content {
                font-size: 16px;
                line-height: 1.6;
            }
            
            .love-letter-container {
                padding: 30px 20px;
            }
            
            .heart-marker {
                width: 45px;
                height: 45px;
            }
            
            .heart-marker i {
                font-size: 22px;
            }
            
            .message-content {
                padding: 20px 15px;
            }
            
            .next-location-btn {
                bottom: 110px;
                width: 90%;
                justify-content: center;
            }
            
            .progress-container {
                padding: 8px 15px;
            }
            
            .progress-text {
                font-size: 13px;
            }
            
            .music-player {
                bottom: 10px;
                right: 10px;
                padding: 8px 15px;
            }
            
            .music-info {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div id="start-screen" class="screen">
        <div class="heart-icon">
            <i class="fas fa-heart"></i>
        </div>
        <h1 style="font-size: 36px; color: #ff5e8e; margin-bottom: 20px;">For My Valentine ❤️</h1>
        <p style="font-size: 20px; color: #ffb6c1; max-width: 600px; line-height: 1.6; padding: 0 20px;">
            A journey through our most precious memories
        </p>
        <div class="touch-to-continue">
            <i class="fas fa-hand-point-up"></i> Touch anywhere to continue
        </div>
    </div>
    
    <!-- Name Screen -->
    <div id="name-screen" class="screen hidden">
        <div class="heart-icon">
            <i class="fas fa-heart"></i>
        </div>
        <p style="font-size: 24px; color: #ffb6c1; margin-bottom: 10px;">This is for you, my love</p>
        <h1 id="recipient-name" class="recipient-name">Sarah</h1>
        <p style="font-size: 20px; color: #ffb6c1; margin-top: 20px; max-width: 600px; padding: 0 20px;">
            Every moment with you is a treasure
        </p>
    </div>
    
    <!-- Memory Screen -->
    <div id="memory-screen" class="screen hidden">
        <div class="heart-icon">
            <i class="fas fa-heart"></i>
        </div>
        <h1 class="memory-text">Remember when...</h1>
        <p style="font-size: 22px; color: #ffb6c1; max-width: 700px; line-height: 1.6; padding: 0 20px;">
            We started this beautiful journey together?<br>
            Let's revisit our special places...
        </p>
    </div>
    
    <!-- Location Screen -->
    <div id="location-screen" class="screen hidden">
        <div class="location-container">
            <div class="location-header">
                <h1 id="location-title" class="location-title">Our First Date</h1>
                <p class="location-instructions">
                    <i class="fas fa-heart" style="color: #ff5e8e;"></i> 
                    Click on the glowing hearts to reveal hidden messages
                </p>
                <div class="location-nav" id="location-nav">
                    <!-- Location dots will be added by JavaScript -->
                </div>
            </div>
            <div class="streetview-container">
                <iframe id="streetview-iframe"></iframe>
                
                <!-- Heart markers will be added here by JavaScript -->
                
                <!-- Message overlay -->
                <div id="message-overlay" class="message-overlay">
                    <div class="message-content">
                        <button id="close-message-btn" class="close-message-btn" title="Close message">
                            <i class="fas fa-times"></i>
                        </button>
                        <h2 id="message-title" class="message-title">A Special Memory</h2>
                        <p id="message-text" class="message-text">
                            This is where we first met. I was so nervous, but the moment I saw you, I knew something special was beginning.
                        </p>
                        <div class="message-actions">
                            <button id="continue-message-btn" class="message-btn continue-message-btn">Continue</button>
                            <button id="close-message-btn-small" class="message-btn close-message-btn-small">Close</button>
                        </div>
                    </div>
                </div>
                
                <!-- Next location button -->
                <button id="next-location-btn" class="next-location-btn">
                    <i class="fas fa-arrow-right"></i> Next Location
                </button>
                
                <!-- Progress overlay -->
                <div class="progress-overlay">
                    <div class="progress-container">
                        <span class="progress-text">Memories found:</span>
                        <div class="progress-dots" id="progress-dots">
                            <!-- Progress dots will be added by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Final Screen -->
    <div id="final-screen" class="screen hidden">
        <div class="love-letter-container">
            <h1 id="love-letter-header" class="love-letter-header">To My Forever Valentine</h1>
            <div id="love-letter-content" class="love-letter-content">
                My dearest love,

                As we journey through all the places that hold our most precious memories, I'm reminded of how incredibly blessed I am to have you in my life. Each location tells a story of our love - from nervous beginnings to comfortable familiarity, from joyful laughter to quiet understanding.

                You are the most beautiful person I know, inside and out. Your kindness touches everyone around you, your strength inspires me daily, and your love has transformed my world in ways I never imagined possible.

                No matter where life takes us, my heart will always find its home with you. Thank you for every moment, every memory, and every tomorrow we'll share together.

                Forever and always,
                Yours
            </div>
            <div class="final-heart">
                <i class="fas fa-heart"></i>
            </div>
        </div>
    </div>
    
    <!-- Music Player -->
    <div class="music-player">
        <button id="music-toggle" class="music-btn" title="Toggle music">
            <i class="fas fa-volume-up"></i>
        </button>
        <div class="music-info">
            Romantic Music
        </div>
    </div>

    <script>
        // ================================
        // CUSTOMIZATION SECTION
        // ================================
        
        // 1. CHANGE YOUR PARTNER'S NAME HERE
        const recipientName = "Sarah";
        
        // 2. CHANGE FINAL LOVE MESSAGE HERE
        const loveMessage = {
            header: "To My Forever Valentine",
            content: `My dearest love,

As we journey through all the places that hold our most precious memories, I'm reminded of how incredibly blessed I am to have you in my life. Each location tells a story of our love - from nervous beginnings to comfortable familiarity, from joyful laughter to quiet understanding.

You are the most beautiful person I know, inside and out. Your kindness touches everyone around you, your strength inspires me daily, and your love has transformed my world in ways I never imagined possible.

No matter where life takes us, my heart will always find its home with you. Thank you for every moment, every memory, and every tomorrow we'll share together.

Forever and always,
Yours`
        };
        
        // 3. CHANGE LOCATIONS & MESSAGES HERE
        // Get Street View URLs from Google Maps:
        // 1. Go to Google Maps → Find location
        // 2. Enter Street View → Click "Share" → "Embed a map"
        // 3. Copy the iframe URL → Paste in streetViewUrl below
        const locations = [
            {
                name: "Our First Date",
                streetViewUrl: "https://www.google.com/maps/embed?pb=!4v1700000000000!6m8!1m7!1sCAoSLEFGMVFpcE5fV3JhRjJwLXFmS1JTTGtYb0hEMjBqN19wOUo4VUprTjN2M184!2m2!1d40.748817!2d-73.985428!3f355.54!4f0!5f0.7820865974627469",
                messages: [
                    "This is where we first met. I was so nervous, but the moment I saw you, I knew something special was beginning.",
                    "I remember how you smiled when you saw me. That smile still melts my heart every single day.",
                    "We talked for hours without realizing how much time had passed. Time flies when I'm with you."
                ],
                heartPositions: [
                    { x: 25, y: 45 },  // Percentage positions
                    { x: 65, y: 35 },
                    { x: 45, y: 65 }
                ]
            },
            {
                name: "Our Favorite Park",
                streetViewUrl: "https://www.google.com/maps/embed?pb=!4v1700000000001!6m8!1m7!1sCAoSLEFGMVFpcE5fV3JhRjJwLXFmS1JTTGtYb0hEMjBqN19wOUo4VUprTjN2M184!2m2!1d40.7831!2d-73.9712!3f0!4f0!5f0.7820865974627469",
                messages: [
                    "We spent countless sunny afternoons here, just talking and dreaming about our future.",
                    "This is where we had our first picnic. You packed my favorite foods without even asking.",
                    "Remember when we got caught in the rain here? We laughed so hard as we ran for shelter."
                ],
                heartPositions: [
                    { x: 30, y: 55 },
                    { x: 60, y: 40 },
                    { x: 75, y: 65 }
                ]
            },
            {
                name: "The Coffee Shop",
                streetViewUrl: "https://www.google.com/maps/embed?pb=!4v1700000000002!6m8!1m7!1sCAoSLEFGMVFpcE5fV3JhRjJwLXFmS1JTTGtYb0hEMjBqN19wOUo4VUprTjN2M184!2m2!1d40.7489!2d-73.9680!3f0!4f0!5f0.7820865974627469",
                messages: [
                    "Our Saturday morning ritual - coffee, pastries, and planning our adventures.",
                    "This is where you first told me you loved me. I'll never forget that moment.",
                    "We've solved all the world's problems at this little table, one coffee at a time."
                ],
                heartPositions: [
                    { x: 40, y: 40 },
                    { x: 70, y: 55 },
                    { x: 30, y: 70 }
                ]
            },
            {
                name: "The Beach at Sunset",
                streetViewUrl: "https://www.google.com/maps/embed?pb=!4v1700000000003!6m8!1m7!1sCAoSLEFGMVFpcE5fV3JhRjJwLXFmS1JTTGtYb0hEMjBqN19wOUo4VUprTjN2M184!2m2!1d40.5795!2d-73.9822!3f0!4f0!5f0.7820865974627469",
                messages: [
                    "We watched the sun dip below the horizon, your hand in mine, feeling like the only two people in the world.",
                    "You wrote our names in the sand here. The tide washed them away, but our love remains.",
                    "This is where we promised to always find time for sunsets together, no matter how busy life gets."
                ],
                heartPositions: [
                    { x: 35, y: 35 },
                    { x: 60, y: 50 },
                    { x: 50, y: 75 }
                ]
            },
            {
                name: "Home",
                streetViewUrl: "https://www.google.com/maps/embed?pb=!4v1700000000004!6m8!1m7!1sCAoSLEFGMVFpcE5fV3JhRjJwLXFmS1JTTGtYb0hEMjBqN19wOUo4VUprTjN2M184!2m2!1d40.7549!2d-73.9840!3f0!4f0!5f0.7820865974627469",
                messages: [
                    "Not just a place, but where our hearts found a home together.",
                    "This is where we build our life together, one beautiful day at a time.",
                    "My favorite place in the world is wherever you are, but this comes pretty close."
                ],
                heartPositions: [
                    { x: 45, y: 40 },
                    { x: 40, y: 65 },
                    { x: 65, y: 70 }
                ]
            }
        ];
        
        // ================================
        // PROFESSIONAL APPLICATION CODE
        // ================================
        
        // State variables
        let currentScreen = 0;
        let currentLocation = 0;
        let foundMessages = 0;
        let musicPlaying = false;
        let isFirstInteraction = true;
        let heartMarkers = [];
        
        // DOM Elements
        const screens = [
            document.getElementById('start-screen'),
            document.getElementById('name-screen'),
            document.getElementById('memory-screen'),
            document.getElementById('location-screen'),
            document.getElementById('final-screen')
        ];
        
        const recipientNameElement = document.getElementById('recipient-name');
        const locationTitle = document.getElementById('location-title');
        const streetviewIframe = document.getElementById('streetview-iframe');
        const messageOverlay = document.getElementById('message-overlay');
        const messageTitle = document.getElementById('message-title');
        const messageText = document.getElementById('message-text');
        const continueMessageBtn = document.getElementById('continue-message-btn');
        const closeMessageBtn = document.getElementById('close-message-btn');
        const closeMessageBtnSmall = document.getElementById('close-message-btn-small');
        const nextLocationBtn = document.getElementById('next-location-btn');
        const loveLetterHeader = document.getElementById('love-letter-header');
        const loveLetterContent = document.getElementById('love-letter-content');
        const musicToggle = document.getElementById('music-toggle');
        const musicInfo = document.querySelector('.music-info');
        const locationNav = document.getElementById('location-nav');
        const progressDots = document.getElementById('progress-dots');
        
        // Audio - Using a reliable royalty-free music source
        const backgroundMusic = new Audio('https://cdn.pixabay.com/download/audio/2022/02/22/audio_d5e2e1c7a3.mp3?filename=romantic-piano-soft-amp-sad-11080.mp3');
        backgroundMusic.loop = true;
        backgroundMusic.volume = 0.6;
        
        // Initialize the application
        function init() {
            // Set recipient name
            recipientNameElement.textContent = recipientName;
            
            // Set love letter
            loveLetterHeader.textContent = loveMessage.header;
            loveLetterContent.textContent = loveMessage.content;
            
            // Setup event listeners
            setupEventListeners();
            
            // Show first screen
            showScreen(0);
            
            // Setup music with user interaction requirement
            setupMusic();
        }
        
        // Setup all event listeners
        function setupEventListeners() {
            // Screen click handlers
            screens[0].addEventListener('click', () => showScreen(1));
            screens[1].addEventListener('click', () => showScreen(2));
            screens[2].addEventListener('click', () => {
                showScreen(3);
                setTimeout(() => {
                    loadLocation(0);
                }, 100);
            });
            
            // Message buttons
            continueMessageBtn.addEventListener('click', continueToNext);
            closeMessageBtn.addEventListener('click', closeMessage);
            closeMessageBtnSmall.addEventListener('click', closeMessage);
            
            // Next location button
            nextLocationBtn.addEventListener('click', goToNextLocation);
            
            // Music toggle
            musicToggle.addEventListener('click', toggleMusic);
            
            // Keyboard support
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && messageOverlay.classList.contains('active')) {
                    closeMessage();
                }
                if (e.key === ' ' || e.key === 'Enter') {
                    e.preventDefault();
                    if (nextLocationBtn.classList.contains('visible')) {
                        goToNextLocation();
                    }
                }
            });
        }
        
        // Setup music with user interaction requirement
        function setupMusic() {
            // Start music on first user interaction
            const startMusicOnInteraction = () => {
                if (isFirstInteraction && !musicPlaying) {
                    playMusic();
                    isFirstInteraction = false;
                    document.removeEventListener('click', startMusicOnInteraction);
                    document.removeEventListener('touchstart', startMusicOnInteraction);
                }
            };
            
            document.addEventListener('click', startMusicOnInteraction);
            document.addEventListener('touchstart', startMusicOnInteraction);
            
            musicInfo.textContent = "Click to play music";
        }
        
        // Play music
        function playMusic() {
            backgroundMusic.play().then(() => {
                musicPlaying = true;
                musicToggle.innerHTML = '<i class="fas fa-volume-up"></i>';
                musicInfo.textContent = "Romantic Music";
                musicToggle.title = "Pause music";
            }).catch(e => {
                console.log("Music play failed, waiting for user interaction");
                musicInfo.textContent = "Click to play music";
                musicToggle.title = "Play music";
            });
        }
        
        // Pause music
        function pauseMusic() {
            backgroundMusic.pause();
            musicPlaying = false;
            musicToggle.innerHTML = '<i class="fas fa-volume-mute"></i>';
            musicInfo.textContent = "Music paused";
            musicToggle.title = "Play music";
        }
        
        // Toggle music
        function toggleMusic() {
            if (musicPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }
        
        // Show specific screen
        function showScreen(screenIndex) {
            screens.forEach(screen => {
                screen.classList.add('hidden');
            });
            
            screens[screenIndex].classList.remove('hidden');
            currentScreen = screenIndex;
        }
        
        // Load a location
        function loadLocation(locationIndex) {
            currentLocation = locationIndex;
            foundMessages = 0;
            
            const location = locations[locationIndex];
            locationTitle.textContent = location.name;
            
            // Set Street View URL with fullscreen parameters
            streetviewIframe.src = location.streetViewUrl + "&output=embed&hl=en&ui=off";
            
            // Clear previous heart markers
            clearHeartMarkers();
            
            // Add heart markers
            setTimeout(() => {
                addHeartMarkers(location);
                createProgressDots(location.messages.length);
                createLocationNav();
                updateNextButton();
            }, 1500);
        }
        
        // Clear heart markers
        function clearHeartMarkers() {
            heartMarkers.forEach(marker => {
                if (marker && marker.parentNode) {
                    marker.parentNode.removeChild(marker);
                }
            });
            heartMarkers = [];
        }
        
        // Add heart markers to the location
        function addHeartMarkers(location) {
            location.heartPositions.forEach((position, index) => {
                const heartMarker = document.createElement('div');
                heartMarker.className = 'heart-marker';
                heartMarker.style.left = `${position.x}%`;
                heartMarker.style.top = `${position.y}%`;
                heartMarker.innerHTML = '<i class="fas fa-heart"></i>';
                heartMarker.dataset.index = index;
                
                heartMarker.addEventListener('click', () => {
                    showMessage(location.messages[index], index);
                    heartMarker.classList.add('found');
                });
                
                streetviewIframe.parentNode.appendChild(heartMarker);
                heartMarkers.push(heartMarker);
            });
        }
        
        // Create progress dots
        function createProgressDots(totalMessages) {
            progressDots.innerHTML = '';
            
            for (let i = 0; i < totalMessages; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                if (i === 0) dot.classList.add('active');
                progressDots.appendChild(dot);
            }
            
            updateProgressText();
        }
        
        // Create location navigation dots
        function createLocationNav() {
            locationNav.innerHTML = '';
            
            locations.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = 'location-dot';
                if (index === currentLocation) {
                    dot.classList.add('active');
                } else if (index < currentLocation) {
                    dot.classList.add('visited');
                }
                locationNav.appendChild(dot);
            });
        }
        
        // Update progress
        function updateProgress() {
            const dots = document.querySelectorAll('.progress-dot');
            dots.forEach((dot, index) => {
                dot.classList.remove('active');
                if (index < foundMessages) {
                    dot.classList.add('found');
                } else if (index === foundMessages) {
                    dot.classList.add('active');
                }
            });
            
            updateProgressText();
            updateNextButton();
        }
        
        // Update progress text
        function updateProgressText() {
            const progressText = document.querySelector('.progress-text');
            progressText.textContent = `Memories found: ${foundMessages}/${locations[currentLocation].messages.length}`;
        }
        
        // Update next button visibility
        function updateNextButton() {
            if (foundMessages >= locations[currentLocation].messages.length) {
                nextLocationBtn.classList.add('visible');
                nextLocationBtn.innerHTML = currentLocation < locations.length - 1 
                    ? '<i class="fas fa-arrow-right"></i> Next Location' 
                    : '<i class="fas fa-heart"></i> Read Love Letter';
            } else {
                nextLocationBtn.classList.remove('visible');
            }
        }
        
        // Show a message
        function showMessage(message, messageIndex) {
            messageTitle.textContent = `Memory ${messageIndex + 1}`;
            messageText.textContent = message;
            messageOverlay.classList.add('active');
            
            // Update progress
            foundMessages++;
            updateProgress();
            
            // Update button text
            if (foundMessages >= locations[currentLocation].messages.length) {
                continueMessageBtn.textContent = "Continue";
            } else {
                continueMessageBtn.textContent = "Next Memory";
            }
        }
        
        // Close message overlay
        function closeMessage() {
            messageOverlay.classList.remove('active');
        }
        
        // Continue to next message or location
        function continueToNext() {
            closeMessage();
            
            // If all messages found and user clicks continue, go to next location
            if (foundMessages >= locations[currentLocation].messages.length) {
                goToNextLocation();
            }
        }
        
        // Go to next location or final screen
        function goToNextLocation() {
            closeMessage();
            
            if (currentLocation < locations.length - 1) {
                // Load next location
                currentLocation++;
                loadLocation(currentLocation);
            } else {
                // All locations done, show final screen
                showScreen(4);
            }
        }
        
        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
